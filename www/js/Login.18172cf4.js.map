{"version":3,"sources":["webpack:///./node_modules/@vue/babel-helper-vue-jsx-merge-props/dist/helper.js","webpack:///./src/Login.tsx","webpack:///./src/apis/login.ts"],"names":["_extends","Object","assign","a","b","c","arguments","length","d","prototype","hasOwnProperty","call","apply","this","normalMerge","toArrayMerge","functionalMerge","mergeJsxProps","reduce","indexOf","Array","e","concat","f","g","h","i","mergeFn","module","exports","Login","isLoading","formData","username","password","rules","required","message","trigger","model","keyCode","loginHandle","$refs","passwordRef","focus","form","validate","valid","then","res","data","status","window","location","reload","error","catch","LoginApi","params","service","post","get","getUserInfo"],"mappings":"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","file":"js/Login.18172cf4.js","sourcesContent":["\"use strict\";function _extends(){return _extends=Object.assign||function(a){for(var b,c=1;c<arguments.length;c++)for(var d in b=arguments[c],b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d]);return a},_extends.apply(this,arguments)}var normalMerge=[\"attrs\",\"props\",\"domProps\"],toArrayMerge=[\"class\",\"style\",\"directives\"],functionalMerge=[\"on\",\"nativeOn\"],mergeJsxProps=function(a){return a.reduce(function(c,a){for(var b in a)if(!c[b])c[b]=a[b];else if(-1!==normalMerge.indexOf(b))c[b]=_extends({},c[b],a[b]);else if(-1!==toArrayMerge.indexOf(b)){var d=c[b]instanceof Array?c[b]:[c[b]],e=a[b]instanceof Array?a[b]:[a[b]];c[b]=d.concat(e)}else if(-1!==functionalMerge.indexOf(b)){for(var f in a[b])if(c[b][f]){var g=c[b][f]instanceof Array?c[b][f]:[c[b][f]],h=a[b][f]instanceof Array?a[b][f]:[a[b][f]];c[b][f]=g.concat(h)}else c[b][f]=a[b][f];}else if(\"hook\"==b)for(var i in a[b])c[b][i]=c[b][i]?mergeFn(c[b][i],a[b][i]):a[b][i];else c[b]=a[b];return c},{})},mergeFn=function(a,b){return function(){a&&a.apply(this,arguments),b&&b.apply(this,arguments)}};module.exports=mergeJsxProps;\n","import { Component, Vue } from 'vue-property-decorator';\r\nimport '@/assets/css/login.less';\r\nimport { Form, FormItem, Input, Button, Message } from 'element-ui';\r\nimport loginApi from './apis/login';\r\nimport userApi from './apis/user';\r\n@Component\r\nexport default class Login extends Vue {\r\n  private isLoading = false;\r\n  private formData = {\r\n    username: '',\r\n    password: ''\r\n  }\r\n  render() {\r\n    const rules = {\r\n      username: [\r\n        {required: true, message: '请输入用户名', trigger: 'blur'}\r\n      ],\r\n      password: [\r\n        {required: true, message: '请输入密码', trigger: 'blur'}\r\n      ]\r\n    };\r\n    return (\r\n      <div class=\"login-wrap\">\r\n        <div class=\"ms-login\">\r\n          <div class=\"ms-title\">\r\n            后台管理系统\r\n          </div>\r\n          <Form props={{\r\n            model: this.formData,\r\n            rules: rules\r\n          }} class=\"ms-form\" ref=\"form\">\r\n            <FormItem prop=\"username\">\r\n              <Input v-model={this.formData.username} size=\"small\">\r\n                <Button slot=\"prepend\" icon=\"el-icon-user\" size=\"small\"></Button>\r\n              </Input>\r\n            </FormItem>\r\n            <FormItem prop=\"password\">\r\n              <Input v-model={this.formData.password} size=\"small\" type=\"password\" \r\n              nativeOnkeydown={(e: KeyboardEvent) => {\r\n                if (e.keyCode === 13) {this.loginHandle()}\r\n              }} ref=\"passwordRef\">\r\n                <Button nativeOnfocus={() => {\r\n                  (this.$refs.passwordRef as Input).focus();\r\n                }} slot=\"prepend\" icon=\"el-icon-lock\" size=\"small\"></Button>\r\n              </Input>\r\n            </FormItem>\r\n            <FormItem>\r\n              <Button loading={this.isLoading} \r\n              onClick={this.loginHandle} \r\n              class=\"login-button\" type=\"primary\">登录</Button>\r\n            </FormItem>\r\n          </Form>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n  loginHandle() {\r\n    (this.$refs.form as Form).validate(async valid => {\r\n      if(valid) {\r\n        this.isLoading = true;\r\n        loginApi.loginHandle(this.formData).then((res) => {\r\n          if (res.data.status === 'Success') {\r\n            window.location.reload();\r\n            // userApi.getUserInfo();\r\n          } else {\r\n            Message.error(res.data.message || '');\r\n          }\r\n          this.isLoading = false;\r\n        }).catch(() => this.isLoading = false);\r\n      }\r\n    }) \r\n  }\r\n}","import baseApi from './baseApi';\r\nimport Res from '@/types/service';\r\nimport user from './user';\r\ninterface LoginParams {\r\n  username: string;\r\n  password: string;\r\n}\r\nclass LoginApi extends baseApi {\r\n  constructor() {\r\n    super('');\r\n  }\r\n  async loginHandle(params: LoginParams) {\r\n    return this.service.post<Res>('/login', params);\r\n  }\r\n  async logoutHandle() {\r\n    await this.service.get('login/logout');\r\n    user.getUserInfo();\r\n  }\r\n}\r\n\r\nexport default new LoginApi();"],"sourceRoot":""}